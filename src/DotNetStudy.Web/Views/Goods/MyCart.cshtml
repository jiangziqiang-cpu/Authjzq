
@{
    ViewData["Title"] = "Cart";
}
@model DotNetStudy.Web.ViewModels.MyCart.MyCart
<h1>我的购物车</h1>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">订单Id</th>
            <th scope="col">商品Id</th>
            <th scope="col">商品名</th>
            <th scope="col">价格</th>
            <th scope="col">数量</th>
            <th scope="col">用户名</th>
            <th scope="col">用户ID</th>
            <th scope="col">操作</th>
        </tr>
    </thead>
    <tbody>
        @{
            foreach (var item in Model.Carts)
            {
                <tr>
                    <td scope="row">@item.Id</td>
                    <td>@item.ProductId</td>
                    <td>@item.ProductName</td>
                    <td>@item.UnitPrice</td>
                    <td>@item.Quantity</td>
                    <td>@item.UserName</td>
                    <td>@item.UserId</td>
                    <td>
                        <form action="/Goods/RemoveCart" method="post">
                            <input type="hidden" name="Id" value="@item.Id" />
                            <button class="btn btn-danger">移除此物品</button>
                        </form>
                    </td>                  
                </tr>
            }
        }
    </tbody>
</table>

<div class="float-right">
    
    <table>
        <tr>
            <td> <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">提交订单</button></td>
            <td>
                <form action="/Goods/RemoveAllCart" method="post">
                    <button class="btn btn-danger" style="float:right">清空购物车</button>
                </form>
            </td>
        </tr>
    </table><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

        <div class="modal-dialog">

            <div class="modal-content">

                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>

                <div class="modal-body">请选择地址</div>

                <div class="col-lg-3">

                    <div class="dropdown col-sm-3 col-md-5 pad-0-l">

                        <button class="btn btn-block btn-default dropdown-toggle text-l" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">

                            <span id="selectMenus">---请选择---</span>

                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            @foreach (var item in Model.MyAddress)
                            {
                                <li>
                                    <a href="#" data-values="@item.Id">@item.AddressInfo</a>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <table class="table table-striped">
                        <tr>
                            <td>
                                <form action="/MyOrder/Submit" method="post">
                                    <input type="hidden" name="MyAddressId" id="names" value="" />
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                    <button type="submit" class="btn btn-primary">提交</button>
                                </form>
                            </td>
                        </tr>
                    </table>
                </div>

            </div><!-- /.modal-content -->

        </div><!-- /.modal -->
    </div>
</div>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        $(".dropdown-menu li a").click(function () {//下拉点击事件
            $("#selectMenus").text($(this).text());//获取文本赋值
            $("#names").val($(this).data("values"));//获取值放入隐藏输入框内

        })
    </script>
}

